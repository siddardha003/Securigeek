<div class="issue-detail-container">
  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading issue details...</p>
  </div>

  <!-- Issue Details -->
  <div *ngIf="!loading && issue" class="issue-content">
    <!-- Header -->
    <div class="header-actions">
      <button mat-icon-button (click)="onBackToList()" matTooltip="Back to Issues">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h1>Issue #{{issue.id}}</h1>
      <div class="spacer"></div>
      <button mat-raised-button color="primary" (click)="onEdit()">
        <mat-icon>edit</mat-icon>
        Edit Issue
      </button>
    </div>

    <mat-card class="issue-card">
      <mat-card-header>
        <mat-card-title>{{issue.title}}</mat-card-title>
        <mat-card-subtitle>
          <div class="metadata">
            <span>Created: {{formatDate(issue.created_at)}}</span>
            <span>â€¢</span>
            <span>Updated: {{formatDate(issue.updated_at)}}</span>
          </div>
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <!-- Status and Priority -->
        <div class="status-priority-row">
          <div class="field">
            <label>Status:</label>
            <mat-chip [color]="getStatusColor(issue.status)" selected>
              {{issue.status | titlecase}}
            </mat-chip>
          </div>
          
          <div class="field">
            <label>Priority:</label>
            <mat-chip [color]="getPriorityColor(issue.priority)" selected>
              {{issue.priority | titlecase}}
            </mat-chip>
          </div>
        </div>

        <mat-divider></mat-divider>

        <!-- Assignee -->
        <div class="field">
          <label>Assignee:</label>
          <span *ngIf="issue.assignee; else noAssignee" class="assignee-value">{{issue.assignee}}</span>
          <ng-template #noAssignee>
            <em class="no-assignee">Unassigned</em>
          </ng-template>
        </div>

        <mat-divider></mat-divider>

        <!-- Description -->
        <div class="field description-field">
          <label>Description:</label>
          <div *ngIf="issue.description; else noDescription" class="description-content">
            <p>{{issue.description}}</p>
          </div>
          <ng-template #noDescription>
            <em class="no-description">No description provided</em>
          </ng-template>
        </div>

        <mat-divider></mat-divider>

        <!-- Raw JSON (for demonstration) -->
        <div class="field json-field">
          <label>Raw Data:</label>
          <details>
            <summary>Show JSON</summary>
            <pre class="json-content">{{issue | json}}</pre>
          </details>
        </div>
      </mat-card-content>

      <mat-card-actions>
        <button mat-button (click)="onBackToList()">
          <mat-icon>list</mat-icon>
          Back to List
        </button>
        <button mat-raised-button color="primary" (click)="onEdit()">
          <mat-icon>edit</mat-icon>
          Edit Issue
        </button>
      </mat-card-actions>
    </mat-card>
  </div>

  <!-- Error State -->
  <div *ngIf="!loading && !issue" class="error-state">
    <mat-card>
      <mat-card-content>
        <div class="error-content">
          <mat-icon color="warn">error</mat-icon>
          <h2>Issue Not Found</h2>
          <p>The requested issue could not be found or has been deleted.</p>
          <button mat-raised-button color="primary" (click)="onBackToList()">
            Back to Issues
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
